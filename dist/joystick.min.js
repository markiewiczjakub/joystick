var Joystick =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/CanvasHandler.ts":
/*!******************************!*\
  !*** ./src/CanvasHandler.ts ***!
  \******************************/
/*! exports provided: CanvasHandler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CanvasHandler", function() { return CanvasHandler; });
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils */ "./src/Utils.ts");
/* harmony import */ var _Vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Vector */ "./src/Vector.ts");


class CanvasHandler {
    constructor(joystick) {
        this.joystick = joystick;
        this.canvas = document.createElement("canvas");
        this.canvas.id = _Utils__WEBPACK_IMPORTED_MODULE_0__["Utils"].uuidv4();
        this.canvas.width = _Utils__WEBPACK_IMPORTED_MODULE_0__["Utils"].width * this.joystick.options.scale;
        this.canvas.height = _Utils__WEBPACK_IMPORTED_MODULE_0__["Utils"].height * this.joystick.options.scale;
        this.canvasContext = this.canvas.getContext("2d");
        this.joystick.domElement.appendChild(this.canvas);
        // max vector's length
        this.circleRadius = {
            background: this.canvas.width / 2 - (3 * this.joystick.options.scale),
            joystick: this.canvas.width / 2 - (20 * this.joystick.options.scale),
            joystickStroke: this.canvas.width / 2 - (21.5 * this.joystick.options.scale),
        };
        this.maxLength = this.canvas.width / 2 - this.circleRadius.joystick;
        this.joystickPoistion = {
            x: this.canvas.width / 2,
            y: this.canvas.height / 2
        };
        this.bindEvents();
        this.draw();
    }
    calculate(x, y) {
        let joystickVector = new _Vector__WEBPACK_IMPORTED_MODULE_1__["Vector"](this.canvas.offsetLeft + this.canvas.width / 2, this.canvas.offsetTop + this.canvas.height / 2);
        let clickVector = new _Vector__WEBPACK_IMPORTED_MODULE_1__["Vector"](x, y);
        let finalVector = clickVector.subtract(joystickVector);
        if (finalVector.length() > this.maxLength) {
            finalVector.normalize();
            finalVector.multiply(this.maxLength);
        }
        this.joystickPoistion.x = finalVector.x + this.canvas.width / 2;
        this.joystickPoistion.y = finalVector.y + this.canvas.width / 2;
        finalVector.divide(this.maxLength);
        this.joystick.update(finalVector.x, finalVector.y);
    }
    bindEvents() {
        const handleClickEvent = (event, state) => {
            if (state === false && this.joystick.draw === true)
                this.joystick.dispatch("end", this.joystick);
            if (state === false) {
                this.joystickPoistion.x = this.canvas.width / 2;
                this.joystickPoistion.y = this.canvas.height / 2;
                this.joystick.update(0, 0);
                this.joystick.draw = state;
                return;
            }
            this.joystick.draw = state;
            this.joystick.dispatch("start", this.joystick);
            const pos = _Utils__WEBPACK_IMPORTED_MODULE_0__["Utils"].getCursorPosition(event);
            this.calculate(pos.x, pos.y);
        };
        const handleMoveEvent = (event) => {
            if (!this.joystick.draw)
                return;
            const pos = _Utils__WEBPACK_IMPORTED_MODULE_0__["Utils"].getCursorPosition(event);
            this.calculate(pos.x, pos.y);
        };
        // for dekstop
        this.canvas.addEventListener("mousedown", (e) => handleClickEvent(e, true));
        document.addEventListener("mouseup", (e) => handleClickEvent(e, false));
        document.addEventListener("mousemove", (e) => handleMoveEvent(e));
        // for mobile
        this.canvas.addEventListener("touchstart", (e) => handleClickEvent(e, true));
        document.addEventListener("touchend", (e) => handleClickEvent(e, false));
        document.addEventListener("touchmove", (e) => handleMoveEvent(e));
    }
    drawBackground() {
        this.canvasContext.beginPath();
        this.canvasContext.lineWidth = 3 * this.joystick.options.scale;
        this.canvasContext.strokeStyle = this.joystick.options.color;
        this.canvasContext.arc(this.canvas.width / 2, this.canvas.height / 2, this.circleRadius.background, 0, 2 * Math.PI);
        this.canvasContext.stroke();
    }
    drawJoystick(x, y) {
        this.canvasContext.beginPath();
        this.canvasContext.arc(x, y, this.circleRadius.joystick, 0, 2 * Math.PI);
        this.canvasContext.fillStyle = this.joystick.options.color;
        this.canvasContext.fill();
        this.canvasContext.beginPath();
        this.canvasContext.arc(x, y, this.circleRadius.joystickStroke, 0, 2 * Math.PI);
        this.canvasContext.strokeStyle = this.joystick.options.strokeColor;
        this.canvasContext.stroke();
    }
    draw() {
        if (!this.canvasContext)
            return;
        this.canvasContext.clearRect(0, 0, this.canvas.width, this.canvas.height);
        this.drawBackground();
        this.drawJoystick(this.joystickPoistion.x, this.joystickPoistion.y);
        // check whether joystick needs to move
        if (this.joystick.draw)
            window.requestAnimationFrame(() => this.draw());
    }
}


/***/ }),

/***/ "./src/Dispatcher.ts":
/*!***************************!*\
  !*** ./src/Dispatcher.ts ***!
  \***************************/
/*! exports provided: Dispatcher */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Dispatcher", function() { return Dispatcher; });
class DispatcherEvent {
    constructor(eventName) {
        this.eventName = eventName;
        this.callbacks = [];
    }
    registerCallback(callback) {
        this.callbacks.push(callback);
    }
    unregisterCallback(callback) {
        const index = this.callbacks.indexOf(callback);
        if (index > -1) {
            this.callbacks.splice(index, 1);
        }
    }
    fire(data) {
        const callbacks = this.callbacks.slice(0);
        callbacks.forEach((callback) => {
            callback(data);
        });
    }
}
class Dispatcher {
    constructor() {
        this.events = {};
    }
    dispatch(eventName, data) {
        const event = this.events[eventName];
        if (event) {
            event.fire(data);
        }
    }
    on(eventName, callback) {
        let event = this.events[eventName];
        if (!event) {
            event = new DispatcherEvent(eventName);
            this.events[eventName] = event;
        }
        event.registerCallback(callback);
    }
    off(eventName, callback) {
        const event = this.events[eventName];
        if (event && event.callbacks.indexOf(callback) > -1) {
            event.unregisterCallback(callback);
            if (event.callbacks.length === 0) {
                delete this.events[eventName];
            }
        }
    }
}


/***/ }),

/***/ "./src/Joystick.ts":
/*!*************************!*\
  !*** ./src/Joystick.ts ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Joystick; });
/* harmony import */ var _CanvasHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CanvasHandler */ "./src/CanvasHandler.ts");
/* harmony import */ var _Dispatcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Dispatcher */ "./src/Dispatcher.ts");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Utils */ "./src/Utils.ts");
/* harmony import */ var _Vector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Vector */ "./src/Vector.ts");




class Joystick extends _Dispatcher__WEBPACK_IMPORTED_MODULE_1__["Dispatcher"] {
    constructor(domElement, options) {
        super();
        this.domElement = domElement;
        this.options = options;
        this._draw = false;
        this.domElement = domElement || document.querySelector("#joystick");
        if (!this.domElement)
            console.error("ERROR: Could not find #joystick HTMLElement.");
        else {
            this.options = options || {};
            // handling options
            this.options.scale = this.options.scale || 1;
            this.options.color = this.options.color || _Utils__WEBPACK_IMPORTED_MODULE_2__["Utils"].color;
            this.options.strokeColor = this.options.strokeColor || _Utils__WEBPACK_IMPORTED_MODULE_2__["Utils"].strokeColor;
            this.init();
        }
    }
    get draw() { return this._draw; }
    set draw(s) {
        if (!s && !this.draw)
            return;
        this._draw = s;
        this.canvasHander.draw();
    }
    init() {
        this.canvasHander = new _CanvasHandler__WEBPACK_IMPORTED_MODULE_0__["CanvasHandler"](this);
    }
    update(x, y) {
        this.dirVector = new _Vector__WEBPACK_IMPORTED_MODULE_3__["Vector"](x, y);
        this.dispatch("change", this);
    }
    // public functions for users
    directionVector() {
        return {
            x: this.dirVector.x,
            y: this.dirVector.y
        };
    }
    directionAngleRads() {
        if (this.dirVector.length() === 0)
            return false;
        else
            return this.dirVector.toAngles();
    }
    directionAngleDegs() {
        if (this.directionAngleRads())
            return this.directionAngleRads() * 180 / Math.PI;
        else
            return false;
    }
    direction() {
        if (this.directionAngleRads()) {
            const angle = Math.round(this.directionAngleDegs()) + 450;
            var val = Math.floor((angle / 22.5) + 0.5);
            var arr = ["N", "NNE", "NE", "ENE", "E", "ESE", "SE", "SSE", "S", "SSW", "SW", "WSW", "W", "WNW", "NW", "NNW"];
            return arr[(val % 16)];
        }
        else
            return false;
    }
}


/***/ }),

/***/ "./src/Utils.ts":
/*!**********************!*\
  !*** ./src/Utils.ts ***!
  \**********************/
/*! exports provided: Utils */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Utils", function() { return Utils; });
class Utils {
    static uuidv4() {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
            var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
        });
    }
    static getCursorPosition(event) {
        let x;
        let y;
        if (event instanceof MouseEvent) {
            x = event.pageX;
            y = event.pageY;
        }
        else if (event instanceof TouchEvent) {
            x = event.changedTouches[0].pageX;
            y = event.changedTouches[0].pageY;
        }
        return { x: x, y: y };
    }
}
Utils.width = 100;
Utils.height = 100;
Utils.color = "#FF0000";
Utils.strokeColor = "#000000";


/***/ }),

/***/ "./src/Vector.ts":
/*!***********************!*\
  !*** ./src/Vector.ts ***!
  \***********************/
/*! exports provided: Vector */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Vector", function() { return Vector; });
class Vector {
    constructor(x, y) {
        this.x = x;
        this.y = y;
        this.x = x || 0;
        this.y = y || 0;
    }
    negative() {
        this.x = -this.x;
        this.y = -this.y;
        return this;
    }
    add(v) {
        if (v instanceof Vector) {
            this.x += v.x;
            this.y += v.y;
        }
        else {
            this.x += v;
            this.y += v;
        }
        return this;
    }
    subtract(v) {
        if (v instanceof Vector) {
            this.x -= v.x;
            this.y -= v.y;
        }
        else {
            this.x -= v;
            this.y -= v;
        }
        return this;
    }
    multiply(v) {
        if (v instanceof Vector) {
            this.x *= v.x;
            this.y *= v.y;
        }
        else {
            this.x *= v;
            this.y *= v;
        }
        return this;
    }
    divide(v) {
        if (v instanceof Vector) {
            if (v.x != 0)
                this.x /= v.x;
            if (v.y != 0)
                this.y /= v.y;
        }
        else {
            if (v != 0) {
                this.x /= v;
                this.y /= v;
            }
        }
        return this;
    }
    equals(v) {
        return this.x == v.x && this.y == v.y;
    }
    dot(v) {
        return this.x * v.x + this.y * v.y;
    }
    cross(v) {
        return this.x * v.y - this.y * v.x;
    }
    length() {
        return Math.sqrt(this.dot(this));
    }
    normalize() {
        return this.divide(this.length());
    }
    min() {
        return Math.min(this.x, this.y);
    }
    max() {
        return Math.max(this.x, this.y);
    }
    toAngles() {
        return -Math.atan2(-this.y, this.x);
    }
    angleTo(a) {
        return Math.acos(this.dot(a) / (this.length() * a.length()));
    }
    toArray(n) {
        return [this.x, this.y].slice(0, n || 2);
    }
    clone() {
        return new Vector(this.x, this.y);
    }
    set(x, y) {
        this.x = x;
        this.y = y;
        return this;
    }
}


/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const Joystick = __webpack_require__(/*! ./Joystick */ "./src/Joystick.ts").default;
module.exports = Joystick;


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Kb3lzdGljay93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9Kb3lzdGljay8uL3NyYy9DYW52YXNIYW5kbGVyLnRzIiwid2VicGFjazovL0pveXN0aWNrLy4vc3JjL0Rpc3BhdGNoZXIudHMiLCJ3ZWJwYWNrOi8vSm95c3RpY2svLi9zcmMvSm95c3RpY2sudHMiLCJ3ZWJwYWNrOi8vSm95c3RpY2svLi9zcmMvVXRpbHMudHMiLCJ3ZWJwYWNrOi8vSm95c3RpY2svLi9zcmMvVmVjdG9yLnRzIiwid2VicGFjazovL0pveXN0aWNrLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O1FBQUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7OztRQUdBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSwwQ0FBMEMsZ0NBQWdDO1FBQzFFO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0Esd0RBQXdELGtCQUFrQjtRQUMxRTtRQUNBLGlEQUFpRCxjQUFjO1FBQy9EOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQSx5Q0FBeUMsaUNBQWlDO1FBQzFFLGdIQUFnSCxtQkFBbUIsRUFBRTtRQUNySTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLDJCQUEyQiwwQkFBMEIsRUFBRTtRQUN2RCxpQ0FBaUMsZUFBZTtRQUNoRDtRQUNBO1FBQ0E7O1FBRUE7UUFDQSxzREFBc0QsK0RBQStEOztRQUVySDtRQUNBOzs7UUFHQTtRQUNBOzs7Ozs7Ozs7Ozs7O0FDakZBO0FBQUE7QUFBQTtBQUFBO0FBQWdDO0FBQ0U7QUFFM0IsTUFBTSxhQUFhO0lBT3RCLFlBQW9CLFFBQWtCO1FBQWxCLGFBQVEsR0FBUixRQUFRLENB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QUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBRUosUUFBUTtRQUNQLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQUVKLE9BQU8sQ0FBRSxDQUFNO1FBQ2QsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMzRCxDQUFDO0lBRUosT0FBTyxDQUFFLENBQVM7UUFDakIsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7SUFFSixLQUFLO1FBQ0osT0FBTyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBRUosR0FBRyxDQUFFLENBQVMsRUFBRSxDQUFTO1FBQ3hCLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdkIsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0NBQ0Q7Ozs7Ozs7Ozs7OztBQzFHRCxNQUFNLFFBQVEsR0FBRyxtQkFBTyxDQUFDLHFDQUFZLENBQUMsQ0FBQyxPQUFPLENBQUM7QUFFL0MsTUFBTSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUMiLCJmaWxlIjoiam95c3RpY2subWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9zcmMvaW5kZXgudHNcIik7XG4iLCJpbXBvcnQgSm95c3RpY2sgZnJvbSBcIi4vSm95c3RpY2tcIjtcclxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlsc1wiO1xyXG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9WZWN0b3JcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDYW52YXNIYW5kbGVyIHtcclxuICAgIHB1YmxpYyBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBjYW52YXNDb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICBwcml2YXRlIG1heExlbmd0aDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBjaXJjbGVSYWRpdXM6IGFueTtcclxuICAgIHB1YmxpYyBqb3lzdGlja1BvaXN0aW9uOiBhbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBqb3lzdGljazogSm95c3RpY2spe1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICB0aGlzLmNhbnZhcy5pZCA9IFV0aWxzLnV1aWR2NCgpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gVXRpbHMud2lkdGggKiB0aGlzLmpveXN0aWNrLm9wdGlvbnMuc2NhbGU7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gVXRpbHMuaGVpZ2h0ICogdGhpcy5qb3lzdGljay5vcHRpb25zLnNjYWxlO1xyXG4gICAgICAgIHRoaXMuY2FudmFzQ29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5qb3lzdGljay5kb21FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKTtcclxuXHJcbiAgICAgICAgLy8gbWF4IHZlY3RvcidzIGxlbmd0aFxyXG4gICAgICAgIHRoaXMuY2lyY2xlUmFkaXVzID0ge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiB0aGlzLmNhbnZhcy53aWR0aC8yIC0gKDMgKiB0aGlzLmpveXN0aWNrLm9wdGlvbnMuc2NhbGUpLFxyXG4gICAgICAgICAgICBqb3lzdGljazogdGhpcy5jYW52YXMud2lkdGgvMiAtICgyMCAqIHRoaXMuam95c3RpY2sub3B0aW9ucy5zY2FsZSksXHJcbiAgICAgICAgICAgIGpveXN0aWNrU3Ryb2tlOiB0aGlzLmNhbnZhcy53aWR0aC8yIC0gKDIxLjUgKiB0aGlzLmpveXN0aWNrLm9wdGlvbnMuc2NhbGUpLFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1heExlbmd0aCA9IHRoaXMuY2FudmFzLndpZHRoLzIgIC0gdGhpcy5jaXJjbGVSYWRpdXMuam95c3RpY2s7XHJcblxyXG4gICAgICAgIHRoaXMuam95c3RpY2tQb2lzdGlvbiA9IHtcclxuICAgICAgICAgICAgeDogdGhpcy5jYW52YXMud2lkdGgvMixcclxuICAgICAgICAgICAgeTogdGhpcy5jYW52YXMuaGVpZ2h0LzJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xyXG4gICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGN1bGF0ZSh4OiBudW1iZXIsIHk6IG51bWJlcil7XHJcbiAgICAgICAgbGV0IGpveXN0aWNrVmVjdG9yOiBWZWN0b3IgPSBuZXcgVmVjdG9yKHRoaXMuY2FudmFzLm9mZnNldExlZnQgKyB0aGlzLmNhbnZhcy53aWR0aC8yLCB0aGlzLmNhbnZhcy5vZmZzZXRUb3AgKyB0aGlzLmNhbnZhcy5oZWlnaHQvMik7XHJcbiAgICAgICAgbGV0IGNsaWNrVmVjdG9yOiBWZWN0b3IgPSBuZXcgVmVjdG9yKHgsIHkpO1xyXG5cclxuICAgICAgICBsZXQgZmluYWxWZWN0b3I6IFZlY3RvciA9IGNsaWNrVmVjdG9yLnN1YnRyYWN0KGpveXN0aWNrVmVjdG9yKTtcclxuICAgICAgICBpZihmaW5hbFZlY3Rvci5sZW5ndGgoKSA+IHRoaXMubWF4TGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZpbmFsVmVjdG9yLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICBmaW5hbFZlY3Rvci5tdWx0aXBseSh0aGlzLm1heExlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmpveXN0aWNrUG9pc3Rpb24ueCA9IGZpbmFsVmVjdG9yLnggKyB0aGlzLmNhbnZhcy53aWR0aC8yO1xyXG4gICAgICAgIHRoaXMuam95c3RpY2tQb2lzdGlvbi55ID0gZmluYWxWZWN0b3IueSArIHRoaXMuY2FudmFzLndpZHRoLzI7XHJcblxyXG4gICAgICAgIGZpbmFsVmVjdG9yLmRpdmlkZSh0aGlzLm1heExlbmd0aCk7XHJcbiAgICAgICAgdGhpcy5qb3lzdGljay51cGRhdGUoZmluYWxWZWN0b3IueCwgZmluYWxWZWN0b3IueSk7XHJcbiAgICB9XHJcblxyXG4gICAgYmluZEV2ZW50cygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBoYW5kbGVDbGlja0V2ZW50ID0gKGV2ZW50OiBhbnksIHN0YXRlOiBib29sZWFuKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIGlmKHN0YXRlID09PSBmYWxzZSAmJiB0aGlzLmpveXN0aWNrLmRyYXcgPT09IHRydWUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmpveXN0aWNrLmRpc3BhdGNoKFwiZW5kXCIsIHRoaXMuam95c3RpY2spO1xyXG4gICAgICAgICAgICBpZihzdGF0ZSA9PT0gZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5qb3lzdGlja1BvaXN0aW9uLnggPSB0aGlzLmNhbnZhcy53aWR0aC8yO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5qb3lzdGlja1BvaXN0aW9uLnkgPSB0aGlzLmNhbnZhcy5oZWlnaHQvMjtcclxuICAgICAgICAgICAgICAgIHRoaXMuam95c3RpY2sudXBkYXRlKDAsIDApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5qb3lzdGljay5kcmF3ID0gc3RhdGU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5qb3lzdGljay5kcmF3ID0gc3RhdGU7XHJcbiAgICAgICAgICAgIHRoaXMuam95c3RpY2suZGlzcGF0Y2goXCJzdGFydFwiLCB0aGlzLmpveXN0aWNrKTtcclxuICAgICAgICAgICAgY29uc3QgcG9zID0gVXRpbHMuZ2V0Q3Vyc29yUG9zaXRpb24oZXZlbnQpOyBcclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGUocG9zLngsIHBvcy55KTsgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaGFuZGxlTW92ZUV2ZW50ID0gKGV2ZW50OiBhbnkpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgaWYoIXRoaXMuam95c3RpY2suZHJhdykgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcG9zID0gVXRpbHMuZ2V0Q3Vyc29yUG9zaXRpb24oZXZlbnQpOyBcclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGUocG9zLngsIHBvcy55KTsgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmb3IgZGVrc3RvcFxyXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IGhhbmRsZUNsaWNrRXZlbnQoZSwgdHJ1ZSkpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIChlKSA9PiBoYW5kbGVDbGlja0V2ZW50KGUsIGZhbHNlKSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCAoZSkgPT4gaGFuZGxlTW92ZUV2ZW50KGUpKTtcclxuXHJcbiAgICAgICAgLy8gZm9yIG1vYmlsZVxyXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIChlKSA9PiBoYW5kbGVDbGlja0V2ZW50KGUsIHRydWUpKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgKGUpID0+IGhhbmRsZUNsaWNrRXZlbnQoZSwgZmFsc2UpKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIChlKSA9PiBoYW5kbGVNb3ZlRXZlbnQoZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdCYWNrZ3JvdW5kKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLmNhbnZhc0NvbnRleHQubGluZVdpZHRoID0gMyAqIHRoaXMuam95c3RpY2sub3B0aW9ucy5zY2FsZTtcclxuICAgICAgICB0aGlzLmNhbnZhc0NvbnRleHQuc3Ryb2tlU3R5bGUgPSB0aGlzLmpveXN0aWNrLm9wdGlvbnMuY29sb3I7XHJcbiAgICAgICAgdGhpcy5jYW52YXNDb250ZXh0LmFyYyh0aGlzLmNhbnZhcy53aWR0aC8yLCB0aGlzLmNhbnZhcy5oZWlnaHQvMiwgdGhpcy5jaXJjbGVSYWRpdXMuYmFja2dyb3VuZCwgMCwgMipNYXRoLlBJKTtcclxuICAgICAgICB0aGlzLmNhbnZhc0NvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0pveXN0aWNrKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jYW52YXNDb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzQ29udGV4dC5hcmMoeCwgeSwgdGhpcy5jaXJjbGVSYWRpdXMuam95c3RpY2ssIDAsIDIqTWF0aC5QSSlcclxuICAgICAgICB0aGlzLmNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gdGhpcy5qb3lzdGljay5vcHRpb25zLmNvbG9yO1xyXG4gICAgICAgIHRoaXMuY2FudmFzQ29udGV4dC5maWxsKCk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLmNhbnZhc0NvbnRleHQuYXJjKHgsIHksIHRoaXMuY2lyY2xlUmFkaXVzLmpveXN0aWNrU3Ryb2tlLCAwLCAyKk1hdGguUEkpXHJcbiAgICAgICAgdGhpcy5jYW52YXNDb250ZXh0LnN0cm9rZVN0eWxlID0gdGhpcy5qb3lzdGljay5vcHRpb25zLnN0cm9rZUNvbG9yO1xyXG4gICAgICAgIHRoaXMuY2FudmFzQ29udGV4dC5zdHJva2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3KCk6IHZvaWQge1xyXG4gICAgICAgIGlmKCF0aGlzLmNhbnZhc0NvbnRleHQpIHJldHVybjtcclxuICAgICAgICB0aGlzLmNhbnZhc0NvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuZHJhd0JhY2tncm91bmQoKTtcclxuICAgICAgICB0aGlzLmRyYXdKb3lzdGljayh0aGlzLmpveXN0aWNrUG9pc3Rpb24ueCwgdGhpcy5qb3lzdGlja1BvaXN0aW9uLnkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgam95c3RpY2sgbmVlZHMgdG8gbW92ZVxyXG4gICAgICAgIGlmKHRoaXMuam95c3RpY2suZHJhdylcclxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmRyYXcoKSk7XHJcbiAgICB9XHJcbn0iLCJjbGFzcyBEaXNwYXRjaGVyRXZlbnQge1xyXG4gICAgcHVibGljIGV2ZW50TmFtZTogc3RyaW5nO1xyXG4gICAgcHVibGljIGNhbGxiYWNrczogQXJyYXk8YW55PjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihldmVudE5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuZXZlbnROYW1lID0gZXZlbnROYW1lO1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJDYWxsYmFjayhjYWxsYmFjazogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgdW5yZWdpc3RlckNhbGxiYWNrKGNhbGxiYWNrOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuY2FsbGJhY2tzLmluZGV4T2YoY2FsbGJhY2spO1xyXG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZpcmUoZGF0YTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5jYWxsYmFja3Muc2xpY2UoMCk7XHJcbiAgICAgICAgY2FsbGJhY2tzLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRGlzcGF0Y2hlciB7XHJcbiAgICBwdWJsaWMgZXZlbnRzOiBhbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudHMgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwYXRjaChldmVudE5hbWU6IHN0cmluZywgZGF0YTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZXZlbnQgPSB0aGlzLmV2ZW50c1tldmVudE5hbWVdO1xyXG4gICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5maXJlKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbihldmVudE5hbWU6IHN0cmluZywgY2FsbGJhY2s6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGxldCBldmVudCA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XHJcbiAgICAgICAgaWYgKCFldmVudCkge1xyXG4gICAgICAgICAgICBldmVudCA9IG5ldyBEaXNwYXRjaGVyRXZlbnQoZXZlbnROYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXSA9IGV2ZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudC5yZWdpc3RlckNhbGxiYWNrKGNhbGxiYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBvZmYoZXZlbnROYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBldmVudCA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XHJcbiAgICAgICAgaWYgKGV2ZW50ICYmIGV2ZW50LmNhbGxiYWNrcy5pbmRleE9mKGNhbGxiYWNrKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnVucmVnaXN0ZXJDYWxsYmFjayhjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5jYWxsYmFja3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5ldmVudHNbZXZlbnROYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IENhbnZhc0hhbmRsZXIgfSBmcm9tIFwiLi9DYW52YXNIYW5kbGVyXCI7XHJcbmltcG9ydCB7IERpc3BhdGNoZXIgfSBmcm9tIFwiLi9EaXNwYXRjaGVyXCI7XHJcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4vVXRpbHNcIjtcclxuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4vVmVjdG9yXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBKb3lzdGljayBleHRlbmRzIERpc3BhdGNoZXIge1xyXG4gICAgcHJpdmF0ZSBjYW52YXNIYW5kZXI6IENhbnZhc0hhbmRsZXI7XHJcbiAgICBwdWJsaWMgX2RyYXc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgZGlyVmVjdG9yOiBWZWN0b3I7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIGRvbUVsZW1lbnQ6IEhUTUxFbGVtZW50LCBwdWJsaWMgb3B0aW9uczogYW55KXtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuZG9tRWxlbWVudCA9IGRvbUVsZW1lbnQgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNqb3lzdGlja1wiKTtcclxuICAgICAgICBpZighdGhpcy5kb21FbGVtZW50KVxyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRVJST1I6IENvdWxkIG5vdCBmaW5kICNqb3lzdGljayBIVE1MRWxlbWVudC5cIik7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgICAgIC8vIGhhbmRsaW5nIG9wdGlvbnNcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnNjYWxlID0gdGhpcy5vcHRpb25zLnNjYWxlIHx8IDE7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jb2xvciA9IHRoaXMub3B0aW9ucy5jb2xvciB8fCBVdGlscy5jb2xvcjtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnN0cm9rZUNvbG9yID0gdGhpcy5vcHRpb25zLnN0cm9rZUNvbG9yIHx8IFV0aWxzLnN0cm9rZUNvbG9yO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBkcmF3KCkgeyByZXR1cm4gdGhpcy5fZHJhdzsgfVxyXG4gICAgc2V0IGRyYXcoczogYm9vbGVhbikge1xyXG4gICAgICAgIGlmKCFzICYmICF0aGlzLmRyYXcpIHJldHVybjtcclxuICAgICAgICB0aGlzLl9kcmF3ID0gcztcclxuICAgICAgICB0aGlzLmNhbnZhc0hhbmRlci5kcmF3KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0KCl7XHJcbiAgICAgICAgdGhpcy5jYW52YXNIYW5kZXIgPSBuZXcgQ2FudmFzSGFuZGxlcih0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKHg6IG51bWJlciwgeTogbnVtYmVyKXtcclxuICAgICAgICB0aGlzLmRpclZlY3RvciA9IG5ldyBWZWN0b3IoeCwgeSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaChcImNoYW5nZVwiLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBwdWJsaWMgZnVuY3Rpb25zIGZvciB1c2Vyc1xyXG4gICAgZGlyZWN0aW9uVmVjdG9yICgpOiBhbnkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6IHRoaXMuZGlyVmVjdG9yLngsXHJcbiAgICAgICAgICAgIHk6IHRoaXMuZGlyVmVjdG9yLnlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlyZWN0aW9uQW5nbGVSYWRzKCk6IGFueSB7XHJcbiAgICAgICAgaWYodGhpcy5kaXJWZWN0b3IubGVuZ3RoKCkgPT09IDApXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpclZlY3Rvci50b0FuZ2xlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGRpcmVjdGlvbkFuZ2xlRGVncygpOiBhbnkge1xyXG4gICAgICAgIGlmKHRoaXMuZGlyZWN0aW9uQW5nbGVSYWRzKCkpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbkFuZ2xlUmFkcygpICogMTgwIC8gTWF0aC5QSTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBkaXJlY3Rpb24oKTogYW55IHtcclxuICAgICAgICBpZih0aGlzLmRpcmVjdGlvbkFuZ2xlUmFkcygpKXtcclxuICAgICAgICAgICAgY29uc3QgYW5nbGU6IG51bWJlciA9IE1hdGgucm91bmQodGhpcy5kaXJlY3Rpb25BbmdsZURlZ3MoKSkgKyA0NTA7XHJcbiAgICAgICAgICAgIHZhciB2YWw6IG51bWJlciA9IE1hdGguZmxvb3IoKGFuZ2xlIC8gMjIuNSkgKyAwLjUpO1xyXG4gICAgICAgICAgICB2YXIgYXJyOiBBcnJheTxzdHJpbmc+ID0gW1wiTlwiLCBcIk5ORVwiLCBcIk5FXCIsIFwiRU5FXCIsIFwiRVwiLCBcIkVTRVwiLCBcIlNFXCIsIFwiU1NFXCIsIFwiU1wiLCBcIlNTV1wiLCBcIlNXXCIsIFwiV1NXXCIsIFwiV1wiLCBcIldOV1wiLCBcIk5XXCIsIFwiTk5XXCJdO1xyXG4gICAgICAgICAgICByZXR1cm4gYXJyWyh2YWwgJSAxNildO1xyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFV0aWxzIHtcclxuICAgIHN0YXRpYyB3aWR0aDogbnVtYmVyID0gMTAwO1xyXG4gICAgc3RhdGljIGhlaWdodDogbnVtYmVyID0gMTAwO1xyXG4gICAgc3RhdGljIGNvbG9yOiBzdHJpbmcgPSBcIiNGRjAwMDBcIjtcclxuICAgIHN0YXRpYyBzdHJva2VDb2xvcjogc3RyaW5nID0gXCIjMDAwMDAwXCI7XHJcblxyXG4gICAgc3RhdGljIHV1aWR2NCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKGMpIHtcclxuICAgICAgICAgIHZhciByOiBudW1iZXIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwLCB2ID0gYyA9PSAneCcgPyByIDogKHIgJiAweDMgfCAweDgpO1xyXG4gICAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRDdXJzb3JQb3NpdGlvbihldmVudDogYW55KTogYW55IHtcclxuICAgICAgICBsZXQgeDogbnVtYmVyO1xyXG4gICAgICAgIGxldCB5OiBudW1iZXI7XHJcblxyXG4gICAgICAgIGlmKGV2ZW50IGluc3RhbmNlb2YgTW91c2VFdmVudCl7XHJcbiAgICAgICAgICAgIHggPSBldmVudC5wYWdlWDtcclxuICAgICAgICAgICAgeSA9IGV2ZW50LnBhZ2VZO1xyXG4gICAgICAgIH1lbHNlIGlmKGV2ZW50IGluc3RhbmNlb2YgVG91Y2hFdmVudCl7XHJcbiAgICAgICAgICAgIHggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDtcclxuICAgICAgICAgICAgeSA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4ge3g6IHgsIHk6IHl9OyAgXHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgVmVjdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB4OiBudW1iZXIsIHB1YmxpYyB5OiBudW1iZXIpe1xyXG4gICAgICAgIHRoaXMueCA9IHggfHwgMDtcclxuICAgICAgICB0aGlzLnkgPSB5IHx8IDA7XHJcbiAgICB9XHJcblxyXG5cdG5lZ2F0aXZlICgpOiBWZWN0b3Ige1xyXG5cdFx0dGhpcy54ID0gLXRoaXMueDtcclxuXHRcdHRoaXMueSA9IC10aGlzLnk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIFxyXG5cdGFkZCAodjogYW55KTogVmVjdG9yICB7XHJcblx0XHRpZiAodiBpbnN0YW5jZW9mIFZlY3Rvcikge1xyXG5cdFx0XHR0aGlzLnggKz0gdi54O1xyXG5cdFx0XHR0aGlzLnkgKz0gdi55O1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy54ICs9IHY7XHJcblx0XHRcdHRoaXMueSArPSB2O1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBcclxuXHRzdWJ0cmFjdCAodjogYW55KTogVmVjdG9yIHtcclxuXHRcdGlmICh2IGluc3RhbmNlb2YgVmVjdG9yKSB7XHJcblx0XHRcdHRoaXMueCAtPSB2Lng7XHJcblx0XHRcdHRoaXMueSAtPSB2Lnk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnggLT0gdjtcclxuXHRcdFx0dGhpcy55IC09IHY7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIFxyXG5cdG11bHRpcGx5ICh2OiBhbnkpOiBWZWN0b3IgIHtcclxuXHRcdGlmICh2IGluc3RhbmNlb2YgVmVjdG9yKSB7XHJcblx0XHRcdHRoaXMueCAqPSB2Lng7XHJcblx0XHRcdHRoaXMueSAqPSB2Lnk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnggKj0gdjtcclxuXHRcdFx0dGhpcy55ICo9IHY7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIFxyXG5cdGRpdmlkZSAodjogYW55KTogVmVjdG9yICB7XHJcblx0XHRpZiAodiBpbnN0YW5jZW9mIFZlY3Rvcikge1xyXG5cdFx0XHRpZih2LnggIT0gMCkgdGhpcy54IC89IHYueDtcclxuXHRcdFx0aWYodi55ICE9IDApIHRoaXMueSAvPSB2Lnk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpZih2ICE9IDApIHtcclxuXHRcdFx0XHR0aGlzLnggLz0gdjtcclxuXHRcdFx0XHR0aGlzLnkgLz0gdjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBcclxuXHRlcXVhbHMgKHY6IGFueSk6IGJvb2xlYW4gIHtcclxuXHRcdHJldHVybiB0aGlzLnggPT0gdi54ICYmIHRoaXMueSA9PSB2Lnk7XHJcbiAgICB9XHJcbiAgICBcclxuXHRkb3QgKHY6IGFueSk6IG51bWJlciAge1xyXG5cdFx0cmV0dXJuIHRoaXMueCAqIHYueCArIHRoaXMueSAqIHYueTtcclxuICAgIH1cclxuICAgIFxyXG5cdGNyb3NzICh2OiBhbnkpOiBudW1iZXIgIHtcclxuXHRcdHJldHVybiB0aGlzLnggKiB2LnkgLSB0aGlzLnkgKiB2LnhcclxuICAgIH1cclxuICAgIFxyXG5cdGxlbmd0aCAoKTogbnVtYmVyICB7XHJcblx0XHRyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZG90KHRoaXMpKTtcclxuICAgIH1cclxuICAgIFxyXG5cdG5vcm1hbGl6ZSAoKTogVmVjdG9yIHtcclxuXHRcdHJldHVybiB0aGlzLmRpdmlkZSh0aGlzLmxlbmd0aCgpKTtcclxuICAgIH1cclxuICAgIFxyXG5cdG1pbiAoKTogbnVtYmVyICB7XHJcblx0XHRyZXR1cm4gTWF0aC5taW4odGhpcy54LCB0aGlzLnkpO1xyXG4gICAgfVxyXG4gICAgXHJcblx0bWF4ICgpOiBudW1iZXIgIHtcclxuXHRcdHJldHVybiBNYXRoLm1heCh0aGlzLngsIHRoaXMueSk7XHJcbiAgICB9XHJcbiAgICBcclxuXHR0b0FuZ2xlcyAoKTogbnVtYmVyICB7XHJcblx0XHRyZXR1cm4gLU1hdGguYXRhbjIoLXRoaXMueSwgdGhpcy54KTtcclxuICAgIH1cclxuICAgIFxyXG5cdGFuZ2xlVG8gKGE6IGFueSk6IG51bWJlciAge1xyXG5cdFx0cmV0dXJuIE1hdGguYWNvcyh0aGlzLmRvdChhKSAvICh0aGlzLmxlbmd0aCgpICogYS5sZW5ndGgoKSkpO1xyXG4gICAgfVxyXG4gICAgXHJcblx0dG9BcnJheSAobjogbnVtYmVyKTogQXJyYXk8bnVtYmVyPiAge1xyXG5cdFx0cmV0dXJuIFt0aGlzLngsIHRoaXMueV0uc2xpY2UoMCwgbiB8fCAyKTtcclxuICAgIH1cclxuICAgIFxyXG5cdGNsb25lICgpOiBWZWN0b3IgIHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yKHRoaXMueCwgdGhpcy55KTtcclxuICAgIH1cclxuICAgIFxyXG5cdHNldCAoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBWZWN0b3IgIHtcclxuXHRcdHRoaXMueCA9IHg7IHRoaXMueSA9IHk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcbn0iLCJjb25zdCBKb3lzdGljayA9IHJlcXVpcmUoJy4vSm95c3RpY2snKS5kZWZhdWx0O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBKb3lzdGljazsiXSwic291cmNlUm9vdCI6IiJ9